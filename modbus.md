# Modbus输出

网关可以设置通过Modbus输出采集到的数据

如下图,打开网关控制界面,在Modbus服务配置里输入端口(不填默认502)并启用,即可开启Modbus功能
![ModbusServer](/img/modbus-1.png)


### 操作方法
![ModbusServer](/img/modbus-2.png)


1. 点击需要输出到Modbus的变量
2. 如果变量类型为空,需要手动调整变量类型
3. 点击保存生成Modbus地址
4. 可以导出为点位表
5. 所有变量均存于保持寄存器

### 协议解释
* 所有的Int均为Int64长整形
* 浮点为Double双精度浮点型
* 字符串长度最大为100
* Alarm类型为一个复杂类型,地址前4位为报警数量,后面每四位为一个报警的报警编号,数据类型为Int64,Alarm总长度为100位.
    
 * 例如cnc_alarm的地址为40209:

 * 40209读取Int64为报警数量

 * 40413读取Int64为第一个报警的报警号

 * 40417读取Int64为第二个报警的报警号

 * .....

* Position类型为一个复杂类型,地址前4位为轴数,后面每八位为一个轴信息,每一个轴信息的前4位为轴名称,字符串类型,后四位为对应的值,Double类型,Position总长度为100位.

 * 例如cnc_mecpos的地址为40109:

 * 40109读取Int64为轴数量

 * 40113读取String(4)为第一个轴名称

 * 40117读取Double为第一个轴的值

 * 40121读取String(4)为第二个轴名称

 * 40125读取Double为第二个轴的值

 * ....